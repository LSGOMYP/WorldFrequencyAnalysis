第12卷第1期
2000年3月　　　　　　　　　北方工业大学学报
J. NO RT H CHIN A UNIV. O F TECH. 　　　　　Vo l. 12 No. 1 
Mar. 2000 
实用VR技术在建筑漫游中的应用* 
戈建涛
(北方工业大学计算中心, 100041,北京石景山, E-mail: g jt@ ncut. edu. cn) 
　　摘　要　讨论了体视技术在建筑漫游模拟中的实际应用,并给出了在整个模拟过程中建立
模型、材质的设定技巧、体视动画的合成技术以及多媒体编辑的一般方法. 
关键词　V R技术;建筑; 材质
分类号　TP391. 4 
　　随着计算机技术的飞速发展和应用领域的
拓展,计算机应用越来越受到社会各界的关注, 
建筑界对其也颇为青睐,这既是建筑构成因素
和建筑设计理论等内在原因决定的,也是建筑
领域计算机应用发展的必然方向. 
近年来,计算机在建筑领域中的应用更加
广泛,它不仅能够进行建筑结构计算、绘制设计
施工图、加强施工管理,而且,随着计算机多媒
体技术和硬件技术的发展,其在建筑设计形象
的表现能力方面更使建筑师得心应手,特别是
建筑漫游的表现技术是用传统的设计方法所无
法实现的.建筑漫游可使人们在建筑物施工之
前就对其外观和内部结构得以身临其境、随心
所欲的游览,此技术正在得到建筑界的普遍重
视和应用,它是一些大型建筑项目(如国家大剧
院、大运村等)竞标的必要条件之一. 
建筑漫游是计算机动画和虚拟现实的重要
应用领域之一,国内外都在这方面投入了大量
的人力物力,而且取得了显著的经济效益和社
会效益. 
一般的建筑漫游主要包括建模、材质的分
配与调整、动画的调整及渲染,对于建筑漫游的
虚拟现实实现还应包括视差图像的合成及多媒
体编辑. 
1　建模方法与应注意的问题
1. 1　建模方法
制作建筑物模型时, 常采用的3种基本方
法: 
( 1) 从二维楼层平面图开始,并设置高度
参数,形成墙高. 
( 2) 从二维墙壁立面图开始,并设置厚度
参数,形成墙的厚度. 
( 3) 从三维CAD模型开始. 
选择何种建模方法常常取决于完成工作的
具体标准,因而,熟悉3种建模方法可方便地组
合使用各种工具. 建立三维表现图的方法,最终
只能依据建模场景来选择. 在实际制作建筑物
模型的过程中,可以将几种方法综合使用. 
现阶段已有能制作出令人惊叹的大量细节
工具,但,并不是所有的细节都需建模. 动画软
件中有许多工具可以用来创建虚拟三维几何
体,而什么时侯可以用虚拟模拟来代替复杂的
几何体建模,这是个技巧,在建模中大量采用. 
用于模拟几何体的工具有: 
收稿日期: 1999― 11― 25 
* 国家“ 863”计划资助项目( No. 863- 306- ZT03- 08- 1) 
作者简介: 戈建涛,工程师. 研究方向: 多媒体技术.

　　( 1) 凹凸贴图. 
( 2) 不透明贴图. 
( 3) 环境背景制作. 
要掌握建筑建模的技巧,最好的办法是在
实践中应用. 
1. 2　应注意的问题
建筑的结构模块数量众多、结构复杂、种类
较多,材料各异,建模的任务比较繁重.一般情
况下应根据模型的不同用途,建模时应有不同
的侧重点.如果建立的模型是为了制作快速的
浏览动画,那么可以简化一些不必要的细节.如
果建立的模型是为了制作局部静态建筑效果
图,那么应该认真建立就近观察的所有细节.如
果制作的是室外效果,那么一般情况下可以忽
略一些局部细节. 这是因为要观察室外的全景, 
摄像机需要设在较远的位置. 如果制作的是室
内局部效果图,则需要在局部细节上花些工夫. 
用于建筑模拟的特征模型除了包含有建筑
构件的几何形体拓扑信息外,还应该包含建筑
构件的特征信息,例如定位面、定位尺寸和材料
等; 而在很多情况下,可以使用材质的肌理来简
化模型的建立.尽管对于机械建模、角色建模和
建筑项目来说建模的许多概念都是一样的,然
而某些建模概念对于建筑模型却是非常有用
的. 如果能清楚地认识到这一点,采用合适的选
项和建模概念,将提高建模的效率,从而产生更
大的经济效益.例如,许多建筑师认为整个模型
应该放到一个文件中,而且应该具有与CAD 
图形一样多的细节.其实这些观念是错误的. 
在建模过程中的一个关键因素是,一个物
体所包含的多边形数目和节点数目对计算机资
源会产生极大的影响. 在创建和渲染过程中,物
体越复杂系统反应越慢. 在每个场景中尽量保
持最少的面数和节点数是至关重要的. 
2　材质的设计与获取
要成功地创造和最有效地虚拟显示作品的
一个重要的方面就是很好地获取、管理和处理
材质. 
2. 1　设计材质时应考虑的典型问题
在设计材质时,需要考虑的问题很多,比较
重要的有: 
( 1) 材质的位图使用. 
对于创建的材质而言,需要一个实际材质
的位图(或者一系列位图) . 尽管流行的图像处
理和绘制软件(例如Pho to shop)能够帮助我们
创建很有用的屏蔽图、各种图案和各种各样的
随机图形(例如分形图形等) ,但是虚拟现实作
品的真实性在很大程度上取决于使用的位图的
真实性. 现在,有很多方法可以得到真实世界的
纹理.需要特别注意的是,位图的分辨率和亮度
对使用该材质的外观有很大影响. 
( 2) 材质接受的灯光. 
材质的显现与它所接受的灯光密切相关. 
如果一个房间内没有灯光,再好的材质也是黑
的. 如果场景采用的是红色光,那么白色材质也
会显现出红色,因此,在设计材质时,需要试验
各种各样的灯光效果. 
( 3) 材质所在对象与摄像机之间的距离. 
对于任何材质的设计来讲,这都是一个相
当重要问题. 如果一个对象远离摄像机,而且在
场景的显著位置上是一个相当复杂的对象,那
么远距离的对象可能无需太多的细节. 同样的
原因,观察的对象越近,材质的细节就变的越为
重要. 如果材质中使用位图的分辨率不够高的
话,当就近观察对象时,可能会看到对象因象素
化而出现的锯齿,这样的效果也就不可能真实. 
因此,在制作虚拟现实作品时,应事先对摄像机
将要拍摄的地方以及观察的目标有个初步的了
解,然后再决定如何设计材质. 
( 4) 材质在摄像机视图中出现的时间. 
根据对象在摄像机视图中停留的时间决定
花费在设计材质上的精力. 如果对象只被看到
几秒,或者只是摄像机镜头摇动时有一两秒种
的模糊镜头,那么就无须花费太多的时间和精
力. 
( 5) 接受材质的几何体. 
几何体所包含面的数目对应用到其上面材
质的外观有很大影响. 面的数目越多,越容易产
生金属的光滑和高亮的效果,但是过多的面会
消耗很多系统资源;反之若面的数目很少,虽然
可以节省系统资源,但渲染的效果会很粗糙.所
以在实际应用时,应在面数和效果之间寻求一
第 1期　　　　　　　　　戈建涛: 实用 V R技术在建筑漫游中的应用 21 * 　　　　　　　　　

个平衡. 
2. 2　材质的获取
在设计材质时,获取真实的位图是关键.获
取位图的方法: 
( 1) 使用已有的图像库. 
现有许多公司提供纹理或材质的CDROM
图库. 查看这些图像并将所需要的部分
转移到贴图目录中是快速、简单的事情.对于需
要将高质量的材质、照片一样的背景或者复杂
的纹理贴图集成到他的虚拟现实产品中的人来
讲,使用这些便宜的资料可以节约很多时间,这
种资源的优点是大部分材质已经被仔细编辑, 
因此,可以在需要的时候将位图完美地无缝平
贴. 
( 2) 使用扫描仪或者数字相机. 
使用扫描仪可以直接将已有的图片扫描到
计算机中,作为材质的贴图. 这是当今常用的一
种方法. 
近年来,数字相机逐步进入人们的生活.对
于材质设计人员来讲,利用数字相机可以方便
地获取任何可以看到的景物的数字化图像.这
为设计材质提供了很大的方便. 
( 3) 使用绘画程序. 
尽管许多材质的真实性和细节取决于象照
片一样真实的原始图像,但是对于手工设计和
编辑图像来讲,绘画程序的价值和能力也是相
当重要的.绘画程序常见的功能包括: 改变图像
的亮度和灰度层次, 镜像图像并将它编辑成可
以重复的贴图,改变贴图的颜色深度,改变贴图
的分辨率等等. 除了用于处理已经存在的静态
图像外,还有很多绘画工具、颜料类型、图像选
择工具以及外挂过滤器来控制贴图和背景. 
获取位图的方法还有很多,这里不一一赘
述. 
需要特别注意的是材质设计涉及到灯光、
颜色和贴图等诸多内容,需要反复实验才能得
到满意的结果. 
3　视差图像的生成与合成
制作一般的建筑浏览动画时,动画设置相
对比较简单,只需让摄像机沿目标点的路径运
动即可,但要在计算机上观察到真正的立体效
果,还应先讨论视差图及其合成问题. 
在制作好建筑浏览动画后,就可渲染得到
各个动画序列.但制作的动画存在一个缺点,就
是由于使用的是一般的透视技术,使人看不到
景深的效果. 众所周知,人眼在观察外界物体时
之所以能够看出具有景深的立体感,主要是因
为人的左右两眼看到的景象是不同的,存在着
水平位差,因此要想在计算机上能够看出景深
的效果,观察到真正的立体三维景象,就需要通
过体视设备如红蓝眼镜、立体眼镜,使我们的左
右两眼分别看到带有水平位差的两幅图像,从
而看到体视效果,这两幅带有水平位差的图像
一般称作视差图. 
要在计算机上生成视差图,就需要设置左、
右两个摄像机,两个摄像机相距一定距离,而观
察的目标点重合,使它们分别观看到的场景就
象我们的左右两眼一样具有水平视差. 
根据现有的动画生成视差动画有两种方
法,一种是使用手工的方法调整摄像机,也就是
将已调整好运动的摄像机设为左摄像机,在其
右侧放置另一摄像机― 右摄像机,并将右摄像
机及其目标点分别绑定到左摄像机及其目标点
上,使它们一起运动; 另一种是使用文献[3 ]中
提到的视差动画的生成与合成系统直接根据已
有动画序列生成视差动画. 在建筑浏览中,最好
使用后一种方法. 
图1　卧室的体视图
生成完两个序列的视差动画图像后,就需
要将两个序列的图像合成. 合成的方法也与最
后的观察方法有关,如果使用红蓝眼镜观察,主
要是处理两个序列图像的颜色; 如果使用立体
眼镜观察,就可以使用合成软件直接合成.图1 
　2　2　　　　　　　　　　　　北 方 工 业 大学 学 报　　　　　　　　　　　　　　第 12卷　

是一幅合成后的体视图,它必须通过立体眼镜
才能观察到体视效果. 
4　配音与编辑合成
由于该项目是室内建筑浏览动画,因此,除
了背景音乐外,应按要求录制并合成解说词.背
景音乐可以直接从录音带中选取,而解说词需
要播音员录制. 
编辑合成是模拟的最后一步. 在这一步需
要将前面形成的体视动画和音频素材编辑合
成,并配以文字说明,形成一个有丰富控制结构
和优美界面的动态演示软件. 该演示系统使用
的是Autho rWare多媒体编辑软件,系统的控
制结构是通过AuthorWare提供的编程语言实
现的. 
本文的研究工作是在黄心渊、古梅和孙伟
同志的帮助下完成的,在此表示衷心的感谢. 
参　考　文　献
1　杨继广,邓观庆等.虚拟现实中的接口技术. 见: 智
能计算机接口与应用进展.吴泉源,钱跃良主编.北
京: 电子工业出版社, 1997 
2　黄心渊,戈建涛,古梅.体视技术在动画中的应用研
究. 见: 智能计算机接口与应用进展. 吴泉源,钱跃
良主编.北京: 电子工业出版社, 1997 
3　黄心渊,唐良瑞.生成体视动画的一种新方法.计算
机辅助设计与图形学学报, 1999, 4( 7): 
Appl ication of the Practical VR Technology in 
Simulation of Building Roam 
Ge Jiantao 
( Com puter Center, No r th China Univ . o f Tech. , 100041, Beijing , China ) 
Abstract　In this article, stereo psis tech nolog y used in simulation o f building roam is di scussed. 
At the same time, the ski lls o f modeling , ma terial set ting and the g eneral metho ds of stereo 
psis animatio n compo sing and multimedia editing are giv en. 
Key Words　V R technolog y; a rchi tecture; material 
第 1期　　　　　　　　　戈建涛: 实用 V R技术在建筑漫游中的应用 23 * 　　　　　　　　　

