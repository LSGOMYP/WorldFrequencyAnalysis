应月技术
王梅
西南交( 通大学牵引动力研究 中心 , 成都61 00 3 1) 
摘要: 讨论了实现虚拟现实各个方面需要的基本技术, 并结合它在建筑漫游系统中的实际应用, 给出
了建模及程序实现需要注意的问题。
关键词: 虚拟现实技术; 建筑; 相关技术
引言
虚拟现实( V irt u al re al it y , 简称V R ) 一词是
1 989 年美国V PI Res e acr h 公司的创始人aJ or n 
U in e r 创造的。意思是: “ 计算机产生的三维交互环
境, 在使用中用户投人到这个环境中去。” 具体地
讲, 虚拟现实是由计算机及一些专用设备构成的环
境, 用户在此环境中利用设备, 以最自然的方式与
环境交互, 从而产生亲临真实环境的感觉。虚拟现
实技术已经在各个方面得到了广泛的应用。如: 军
事、航空航天、虚拟制造、
医疗、娱乐、建筑设计等
。
近年来, 虚拟现实在建筑漫游系统中的应用已
越来越广泛, 并取得了较好的效果。
和传统的设计
技术相比, 建筑漫游使建筑师在施工之前对建筑物
群进行游览, 并及时修改, 从而使建筑效果更易表
达; 房地产公司可以利用这项技术, 向客户展示规
划中的建筑, 根据用户的要求进行修改, 以满足用
户的需求; 在大的建筑漫游中可以规划城市建设, 
向客户展示规划区, 以吸引投资, 增强竟标实力。
现在的建筑漫游系统有多种, 层次不一, 但要真正
达到虚拟现实要求还需要进一步提高。
本文分析了虚拟现实的特点及其对相关技术
的要求, 并结合建筑漫游系统, 描述了建模过程中
的一些方法和注意的问题。
1 VR 的特点及其实现
( 1 ) V R 的特点
V R 的三大特征为沉浸( im m e sr i o n ) 
、交互
( i n t e ar e t i o n ) 和构想( im a ig n a t i o n ) 
。人类感受自然世
界主要是通过视觉、听觉、触觉和嗅觉等
。为了令
使用者产生身临其境的感觉, 应该从这几个方面着
手去实现。如图1 所示。
力学反馈
图1 V R 系统的实现
目前, 嗅觉由计算机系统来实现仍然是很困难
的, 但在其他几个方面已经有了一定的进展。
( 2 )视觉、听觉和触觉的实现
人的感觉有8 0% 来自于视觉。
其过程可表示
为视网膜一一视神经元一一大脑。当我们看到物
体时, 不仅看到了形状, 也感受到了它的深度, 即两
只眼睛都有稍微不同的视角, 视网膜将其组合为一
个立体景物。计算机屏幕是一个最简单的V R 显示
设备, 它与立体眼镜配合可以提供立体图像
。
其他如
大屏幕投影和比较先进的头戴式显示器( H M D ) 
, 它
模拟人观察景物的过程, 为每一只眼睛提供一个单
独的图像, 从而使得到的图像更富真实感。
听觉是仅次于视觉的感知途径。声音大大增
强了虚拟现实系统的逼真性。对同一声音, 存在着
两耳的时间差( I TD ) 
。因此虚拟系统应该产生立体
国扰少仇曰什 ” 
公开知饥ǎó砂蟹矛
0 Mo DERN CoMPUTER 20 0 
・ 
, 2 
í湘皿用ù山

声及随距离变化的声音。
当用户在操纵物体时, 应能够感受到虚拟物体
的存在。触觉的实现可以利用数据手套或数据衣。
如Vi rt e x 公司生产的C y b e ` l o v e 。
其他还有一些反馈及输人设备系统, 通过这些
系统, 虚拟现实系统可以知道用户所处的位置及做
出的动作, 从而做出相应的反应。如跟踪器及六自
由度( 6D O F ) 的输人设备。
2 V R 在建筑漫游系统中的应用
2 
. 
1 建筑物建模过程
在实现视觉效果时, 可以采用基于数据图像的
方法(I B R 
, 
im a g e 一b a s e d r e n d e ir n g) 和基于图形建模
的方法, 本文将讨论第二种方法
。具体建模之前要
完成的工作, 是要根据客户需求决定场景的大小及
使用的建模工具。简单的场景可用文本编辑的编
辑器来进行。
但对于较为复杂的场景, 从新的基本
代码行开始将会非常困难, 需要引入其他的建模工
具, 也可以将几种工具配合使用。现在的许多建模
工具都采用面向对象技术, 使建模变得更加直观而
且容易。
值得注意的是, 许多工具可以得到包括大
量细节的场景, 但是并不是细节越多越好, 考虑到
虚拟现实实现需要的实时性, 细节数量应该在不影
响视觉效果的情况下尽量减少。
( 1 ) 几何建模
在建模之前, 首先要考虑的是需要表现多少细
节。对于减少的细节, 可以在物理建模中实现。然
后可以分为以下几步实现: 
①建立起对象的轮廓和形状以及其属性。
②各个对象之间拓扑关系特性。
③各个对象的数值和说明信息。
贯穿于整个几何建模过程中的是面向对象的
思想。面向对象的核心是数据和操作行为的抽象, 
用数据封装技术将二者集成为一个类或对象
。用
户只需根据对象提供的外部特性接口访问对象。
而通过子类对父类的继承, 可使子类同时享有父类
的数据和操作行为、利用多态性, 子类也可定义新
的数据或新的操作
。设计过程中可将基本组成分
为五个层次: 建筑物、部件( 如体
、地基、环境等) 
、
部
件组成部分、面、子面。如图2 所示
。
前面各个类间的关系都是组成关系, 而后面的
面与子面则是依附关系。如某一墙面与窗户的关
应月茄术
系。如果不采用卜b u fe r 技术, 即在每个像素上附
加一个24 位或4 8 位的表示Z 值的缓冲碰撞检
测, 绘图的顺序可能会决定于拓扑结构, 这对图形
的正确显示将起关键性的作用。一个好钓数据结
构有利于理解和修改模型。有的软件可以生成易
于控制的子模型继承以及便于产生交互式的、彩色
装饰的数据库。
{鲍三月
建筑物l … 建筑物n 光照声音
… 部件n 
; 面1 1 
牵
面2 
` 饰二
子面n 
… 面n 
二
图2 面向对象的数据结构
(注: 图中的空心箭头表示下面可能还有子类) 
祠的少找“
什月
脸异翻饥ǎ匕心竺木
建模中的另一要点是细节的简化。细节等级
L On ( 玩ve l 。f d e t a i l s ) 在实时性上起着重要作用。众
所周知, 当对象离视点较远时, 看到的细节会大大
减少。基于这一点, 当用户远距离观察物体时, 看
到的场景可能会更大, 如果不减小模型大小, 将会
给实时性带来困难。因此可以建立高
、
中
、
低三个
层次的模型, 当对象离用户在不同距离时, 分别切
换不同的模型
。减小细节可以有以下几种方法: 
①删除或隐藏不可见面。
如内部墙体
。
②用简单的形状代替复杂外形。如树木在场
景中往往是不可缺少的, 而且其数目相当的庞大, 
如果对每一棵树木都用建模的方法来实现, 那么要
实现实时虚拟是很困难的。这时往往采用交叉的
两个面来实现, 并采用不透明贴图来表示
。如图3 
所示。
经过这样的简化, 面可以由九万多个减少到两
个面。有时甚至可以用只有一个面的二维图形代
替三维图形。
③用纹理贴图的方法来代替大量的细节。这
将在物理建模中实现。
( 2) 物理建模
所谓物理建模就是进行材质和纹理、颜色、光
照等的处理。
如前所述, 好的纹理可以替代大量的
甲立用湘) 
Mo n ERN c oMPu TER 姗。, 
1: 印

